<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Plazos Judiciales - Santa Fe</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Roboto', sans-serif; background-color: #f4f7f6; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; padding:20px; box-sizing:border-box; }
    .calculator-container { background-color:#fff; border-radius:12px; box-shadow:0 8px 16px rgba(0,0,0,0.1); width:100%; max-width:900px; display:flex; flex-direction:column; overflow:hidden; }
    .header { background-color:#2c3e50; color:#fff; padding:25px 30px; text-align:center; border-bottom:1px solid #34495e; }
    .header h1 { margin:0 0 5px 0; font-size:1.8em; font-weight:700; }
    .header p { margin:0; font-size:0.9em; opacity:0.8; }
    .content-wrapper { display:flex; flex-direction:column; padding:30px; }
    @media (min-width: 768px){ .content-wrapper { flex-direction:row; } }
    .input-section, .result-section { flex:1; padding:0 15px; }
    .input-section { border-right:1px solid #ecf0f1; padding-right:30px; }
    @media (max-width:767px){ .input-section { border-right:none; border-bottom:1px solid #ecf0f1; padding-bottom:30px; margin-bottom:30px; } }
    .form-group { margin-bottom:20px; }
    .form-group label { display:block; margin-bottom:8px; font-weight:700; color:#34495e; font-size:0.95em; }
    .form-group input[type="date"], .form-group input[type="number"], .form-group select { width:100%; padding:12px 15px; border:1px solid #ccc; border-radius:6px; font-size:1em; box-sizing:border-box; }
    .checkbox-group { margin-top:15px; }
    .checkbox-item { display:flex; align-items:center; margin-bottom:12px; cursor:pointer; }
    .checkbox-item input[type="checkbox"] { margin-right:10px; width:20px; height:20px; }
    .result-section { background-color:#f9fbfb; border-radius:8px; padding:30px; text-align:center; border:1px dashed #dcdfe1; display:flex; flex-direction:column; justify-content:center; align-items:center; }
    .result-box { background-color:#27ae60; color:#fff; padding:20px 30px; border-radius:8px; margin-bottom:20px; box-shadow:0 4px 8px rgba(0,0,0,0.15); min-width:200px; }
    .result-box .label { font-size:1.1em; margin-bottom:5px; font-weight:700; }
    .result-box .date { font-size:2.2em; font-weight:700; }
    .remaining-days { color:#555; font-size:1em; margin-top:5px; }
    .info-text { font-size:0.85em; color:#7f8c8d; margin-top:25px; text-align:left; }
    table { width:100%; border-collapse: collapse; margin-top:15px; }
    table th, table td { border:1px solid #ccc; padding:8px; text-align:center; }
    footer { margin-top:20px; text-align:center; font-size:0.8em; color:#999; }
</style>
</head>
<body>

<div class="calculator-container">
    <div class="header">
        <h1>CALCULADORA DE PLAZOS JUDICIALES</h1>
        <p>Santa Fe - Leyes Procesales</p>
    </div>

    <div class="content-wrapper">
        <div class="input-section">
            <div class="form-group">
                <label for="fechaInicio">FECHA DE NOTIFICACIÓN</label>
                <input type="date" id="fechaInicio" required>
            </div>

            <div class="form-group">
                <label for="cantidadDias">CANTIDAD DE DÍAS HÁBILES DEL PLAZO</label>
                <input type="number" id="cantidadDias" min="1" value="10" required>
            </div>

            <div class="form-group checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="considerarFeria" checked>
                    <label for="considerarFeria">Considerar Feria Judicial (Enero/Julio)</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="excluirFeriadosNacionales" checked>
                    <label for="excluirFeriadosNacionales">Excluir Feriados Nacionales y Religiosos Católicos</label>
                </div>
            </div>
        </div>

        <div class="result-section">
            <div class="result-box">
                <div class="label">PLAZO VENCE EL:</div>
                <div class="date" id="fechaVencimiento">-</div>
            </div>
            <div class="remaining-days" id="diasRestantes">Seleccione fecha y días para calcular.</div>
            <div id="tablaDias"></div>
            <p class="info-text">
                *Plazo inicia al día hábil siguiente de la notificación.<br>
                *Cada plazo incluye un “día de gracia”.<br>
                *Se consideran inhábiles feriados nacionales y religiosos católicos. Los feriados religiosos no católicos son hábiles.
            </p>
        </div>
    </div>
    <footer>© 2025 Estudio Jurídico - Calculadora de Plazos Judiciales</footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', async function() {
    const fechaInicioInput = document.getElementById('fechaInicio');
    const cantidadDiasInput = document.getElementById('cantidadDias');
    const considerarFeriaCheckbox = document.getElementById('considerarFeria');
    const excluirFeriadosNacionalesCheckbox = document.getElementById('excluirFeriadosNacionales');
    const fechaVencimientoDiv = document.getElementById('fechaVencimiento');
    const diasRestantesDiv = document.getElementById('diasRestantes');

    let listaFeriados = [];

    async function obtenerFeriados(anio = new Date().getFullYear()) {
        listaFeriados = [
            `${anio}-01-01`, `${anio}-03-24`, `${anio}-04-02`,
            `${anio}-05-01`, `${anio}-07-09`, `${anio}-12-08`,
            `${anio}-12-25`
        ];
    }

    await obtenerFeriados();

    function isWeekend(date) {
        const day = date.getDay();
        return day === 0 || day === 6;
    }

    function isNationalHoliday(date) {
        const iso = date.toISOString().slice(0,10);
        return listaFeriados.includes(iso);
    }

    function isJudicialFeria(date) {
        if(!considerarFeriaCheckbox.checked) return false;
        const month = date.getMonth();
        const day = date.getDate();
        return (month===0) || (month===6 && day>=16);
    }

    function calculateDueDate() {
        const startDateStr = fechaInicioInput.value;
        let daysToAdd = parseInt(cantidadDiasInput.value);
        if(!startDateStr || isNaN(daysToAdd)||daysToAdd<=0){
            fechaVencimientoDiv.textContent='-';
            diasRestantesDiv.textContent='Seleccione fecha y días para calcular.';
            document.getElementById('tablaDias').innerHTML='';
            return;
        }

        let currentDate = new Date(startDateStr+'T03:00:00Z');
        currentDate.setDate(currentDate.getDate()+1); // Comienza al día hábil siguiente
        while(isWeekend(currentDate)||(excluirFeriadosNacionalesCheckbox.checked && isNationalHoliday(currentDate))||isJudicialFeria(currentDate)){
            currentDate.setDate(currentDate.getDate()+1);
        }

        let currentDayCount=0;
        let tablaHTML='<table><tr><th>Fecha</th><th>Estado</th><th>Nota</th></tr>';

        while(currentDayCount<daysToAdd){
            const isInhabil = isWeekend(currentDate)||(excluirFeriadosNacionalesCheckbox.checked && isNationalHoliday(currentDate))||isJudicialFeria(currentDate);
            if(!isInhabil){
                currentDayCount++;
                tablaHTML+=`<tr style="background:#d4edda;"><td>${currentDate.toLocaleDateString('es-AR')}</td><td>Hábil</td><td>Día hábil ${currentDayCount}</td></tr>`;
            } else{
                let nota = isJudicialFeria(currentDate)?'Feria judicial':'Feriado o fin de semana';
                tablaHTML+=`<tr style="background:#f8d7da;"><td>${currentDate.toLocaleDateString('es-AR')}</td><td>Inhábil</td><td>${nota}</td></tr>`;
            }
            currentDate.setDate(currentDate.getDate()+1);
        }

        // Día de gracia
        while(isWeekend(currentDate)||(excluirFeriadosNacionalesCheckbox.checked && isNationalHoliday(currentDate))||isJudicialFeria(currentDate)){
            currentDate.setDate(currentDate.getDate()+1);
        }
        tablaHTML+=`<tr style="background:#ffeeba;"><td>${currentDate.toLocaleDateString('es-AR')}</td><td>Día de gracia</td><td>Aplica al final del plazo</td></tr></table>`;

        fechaVencimientoDiv.textContent=currentDate.toLocaleDateString('es-AR');
        diasRestantesDiv.innerHTML=`Plazo de ${daysToAdd} días hábiles + día de gracia`;
        document.getElementById('tablaDias').innerHTML=tablaHTML;
    }

    fechaInicioInput.addEventListener('change',calculateDueDate);
    cantidadDiasInput.addEventListener('input',calculateDueDate);
    considerarFeriaCheckbox.addEventListener('change',calculateDueDate);
    excluirFeriadosNacionalesCheckbox.addEventListener('change',calculateDueDate);

    fechaInicioInput.value=new Date().toISOString().split('T')[0];
    calculateDueDate();
});
</script>
</body>
</html>